<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmetic Battle Pass – D&D 5e</title>
    <link rel="stylesheet" href="../../global.css">
    <link rel="stylesheet" href="../../styles.css">
    <link rel="stylesheet" href="battle-pass.css">
</head>
<body>
    <div class="container battle-pass-app">
        <header class="bp-header">
            <div>
                <h1>Cosmetic Battle Pass</h1>
                <p class="intro" style="margin-top:0.25rem;color:var(--text-light);font-size:0.95rem;">Level up your gear look with XP. Zero power creep—pure cosmetic flair.</p>
            </div>
            <div class="bp-header-actions">
                <a href="../../index.html" class="theme-toggle" aria-label="Hub">&#127968;</a>
                <button type="button" id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">&#127769;</button>
            </div>
        </header>

        <!-- Dashboard hero: level badge + next unlock ring -->
        <section id="bp-dashboard-hero" class="bp-dashboard-hero" data-level="1">
            <div class="bp-level-badge" id="bp-hero-level">1</div>
            <div class="bp-theme-name" id="bp-hero-theme">Cotton</div>
            <div class="bp-progress-bar-wrap">
                <div class="bp-progress-bar-fill" id="bp-progress-fill" style="width: 0%;"></div>
            </div>
            <div class="bp-next-unlock">
                <div class="bp-ring-wrap">
                    <svg class="bp-ring-svg" viewBox="0 0 36 36">
                        <circle class="bp-ring-bg" cx="18" cy="18" r="16" stroke-width="3"/>
                        <circle class="bp-ring-fill" id="bp-ring-fill" cx="18" cy="18" r="16" stroke-width="3" stroke-dasharray="100" stroke-dashoffset="100"/>
                    </svg>
                </div>
                <span id="bp-next-unlock-text">Next unlock in 75 XP (Tier 1)</span>
            </div>
        </section>

        <div class="bp-xp-row">
            <label for="bp-current-xp">Current XP</label>
            <input type="number" id="bp-current-xp" min="0" value="0" placeholder="0">
            <button type="button" id="bp-milestone-btn" class="btn-secondary">Set to level start (milestone)</button>
            <span id="bp-xp-error" class="bp-xp-error" style="display:none;"></span>
        </div>

        <div class="bp-tabs">
            <button type="button" class="bp-tab active" data-tab="dashboard">Dashboard & Tiers</button>
            <button type="button" class="bp-tab" data-tab="character">Character & Gear</button>
            <button type="button" class="bp-tab" data-tab="generate">Generate & Gallery</button>
        </div>

        <div id="bp-tab-dashboard" class="bp-tab-content active">
            <section class="bp-form-section" id="bp-current-level-section">
                <h2 id="bp-current-level-heading">Your look – Level <span id="bp-current-level-num">1</span></h2>
                <p class="help-text" id="bp-current-level-hint" style="font-size:0.9rem;color:var(--text-light);margin-bottom:0.75rem;">Toggle which tiers to include in your generated prompts.</p>
                <div id="bp-current-level-tiers" class="bp-tier-cards-grid"></div>
            </section>
            <details class="bp-form-section" id="bp-other-levels-details">
                <summary>Other unlocked levels</summary>
                <div class="bp-filter-bar">
                    <input type="text" id="bp-filter-search" placeholder="Filter by level, theme, gear…">
                    <select id="bp-filter-level" aria-label="Filter by level">
                        <option value="">All levels</option>
                    </select>
                    <select id="bp-filter-theme" aria-label="Filter by theme">
                        <option value="">All themes</option>
                    </select>
                </div>
                <div id="bp-accordions"></div>
            </details>
        </div>

        <div id="bp-tab-character" class="bp-tab-content">
            <section class="bp-form-section">
                <h2>Character</h2>
                <div class="bp-form-group">
                    <label for="bp-char-name">Name</label>
                    <input type="text" id="bp-char-name" placeholder="Character name">
                </div>
                <div class="bp-form-group">
                    <label for="bp-char-class">Class</label>
                    <input type="text" id="bp-char-class" placeholder="e.g. Cleric">
                </div>
                <div class="bp-form-group">
                    <label for="bp-art-style">Art style</label>
                    <input type="text" id="bp-art-style" value="epic high-fantasy" placeholder="epic high-fantasy">
                </div>
                <div class="bp-form-group">
                    <label for="bp-motif">Personal motif</label>
                    <input type="text" id="bp-motif" placeholder="e.g. sunburst holy symbol">
                </div>
                <div class="bp-form-group">
                    <label>Portrait (optional)</label>
                    <input type="file" id="bp-portrait-file" accept="image/*" aria-label="Upload character portrait">
                    <p class="help-text" style="font-size:0.85rem;color:var(--text-light);margin-top:0.25rem;">For composite “equip gear” prompts. If none, we’ll give you a placeholder character prompt first.</p>
                </div>
                <div class="bp-form-group">
                    <label><input type="checkbox" id="bp-sound-toggle"> Play sound on unlock</label>
                </div>
                <div class="bp-form-group">
                    <button type="button" id="bp-reseed-btn" class="btn-secondary">Reseed (new gear/effects for future unlocks)</button>
                </div>
            </section>
            <section class="bp-form-section">
                <h2>Gear pool (min 2)</h2>
                <div class="bp-form-group">
                    <label>Add from list</label>
                    <div class="bp-gear-search">
                        <input type="text" id="bp-gear-search" placeholder="Search equipment…">
                    </div>
                    <div class="bp-gear-list" id="bp-gear-list"></div>
                </div>
                <div class="bp-form-group">
                    <label>Custom item</label>
                    <div style="display:flex;gap:0.5rem;flex-wrap:wrap;">
                        <input type="text" id="bp-gear-custom" placeholder="Item name">
                        <button type="button" id="bp-gear-add-custom" class="btn-secondary">Add</button>
                    </div>
                </div>
                <div class="bp-form-group">
                    <label>Your gear pool</label>
                    <div class="bp-gear-pool-chips" id="bp-gear-pool"></div>
                </div>
                <p id="bp-gear-error" class="bp-error-msg" style="display:none;"></p>
            </section>
        </div>

        <div id="bp-tab-generate" class="bp-tab-content">
            <section class="bp-form-section">
                <button type="button" id="bp-generate-btn" class="bp-generate-btn">Generate prompts</button>
                <p id="bp-generate-status" style="margin-top:0.5rem;font-size:0.9rem;color:var(--text-light);"></p>
            </section>
            <div class="bp-form-group">
                <label>Standalone gear prompt</label>
                <textarea id="bp-standalone-prompt" rows="6" readonly placeholder="Generate to see prompt."></textarea>
                <button type="button" id="bp-copy-standalone" class="btn-secondary" style="margin-top:0.5rem;">Copy</button>
            </div>
            <div class="bp-form-group">
                <label>Placeholder character prompt (use when no portrait)</label>
                <textarea id="bp-placeholder-prompt" rows="2" readonly></textarea>
                <button type="button" id="bp-copy-placeholder" class="btn-secondary" style="margin-top:0.5rem;">Copy</button>
            </div>
            <div class="bp-form-group">
                <label>Composite prompt (equip gear on portrait)</label>
                <textarea id="bp-composite-prompt" rows="6" readonly placeholder="Generate to see prompt."></textarea>
                <button type="button" id="bp-copy-composite" class="btn-secondary" style="margin-top:0.5rem;">Copy</button>
            </div>
            <section class="bp-form-section">
                <h2>Gallery (download preferred; max 20)</h2>
                <p class="help-text" style="font-size:0.85rem;margin-bottom:0.5rem;">Add images you generate elsewhere. Stored locally; download to keep.</p>
                <input type="file" id="bp-gallery-add" accept="image/*" aria-label="Add image to gallery" class="bp-gallery-add-input">
                <div class="bp-gallery-grid" id="bp-gallery"></div>
            </section>
            <div class="bp-form-section">
                <button type="button" id="bp-export-json" class="btn-secondary">Export character build (JSON)</button>
            </div>
        </div>

        <div id="bp-confetti-wrap" class="bp-confetti-wrap" aria-hidden="true"></div>
    </div>

    <script src="../../theme.js"></script>
    <script src="data-xp-themes.js"></script>
    <script src="script.js"></script>
</body>
</html>
